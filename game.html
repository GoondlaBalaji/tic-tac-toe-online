<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8" />
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  Â  <title>Tic-Tac-Toe: KA-POW! Edition (Advanced)</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Permanent+Marker&family=Kalam:wght@400;700&display=swap" rel="stylesheet">
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
Â  Â  <style>
Â  Â  Â  Â  /* --- COMIC THEME VARIABLES --- */
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --font-bangers: 'Bangers', cursive;
Â  Â  Â  Â  Â  Â  --font-marker: 'Permanent Marker', cursive;
Â  Â  Â  Â  Â  Â  --font-handwritten: 'Kalam', cursive;
Â  Â  Â  Â  Â  Â  --color-ink: #1a1a1a;
Â  Â  Â  Â  Â  Â  --color-paper: #f5f5f0;
Â  Â  Â  Â  Â  Â  --color-accent-x: #FF4500; /* Bright Red/Orange for X */
Â  Â  Â  Â  Â  Â  --color-accent-o: #1E90FF; /* Bright Blue for O */
Â  Â  Â  Â  Â  Â  --color-win-line: #32CD32; /* Lime Green for Win */
Â  Â  Â  Â  Â  Â  --panel-stroke-width: 6px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- BASE STYLES & BACKGROUND --- */
Â  Â  Â  Â  *, *::before, *::after { box-sizing: border-box; }
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: var(--font-handwritten);
Â  Â  Â  Â  Â  Â  color: var(--color-ink);
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  height: 100vh; /* FIX: Added to prevent vertical scrollbar */
Â  Â  Â  Â  Â  Â  width: 100vw; /* FIX: Added to prevent horizontal scrollbar */
Â  Â  Â  Â  Â  Â  overflow: hidden; /* FIX: Added to explicitly remove scrollbars */
Â  Â  Â  Â  Â  Â  /* Halftone background texture - Adjusted for clarity */
Â  Â  Â  Â  Â  Â  background: var(--color-paper);
Â  Â  Â  Â  Â  Â  background-image:
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(var(--color-ink) 0.5px, transparent 0.5px),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(var(--color-ink) 0.5px, var(--color-paper) 0.5px);
Â  Â  Â  Â  Â  Â  background-size: 12px 12px;
Â  Â  Â  Â  Â  Â  background-position: 0 0, 6px 6px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- GAME CONTAINER (THE MAIN PANEL) --- */
Â  Â  Â  Â  #game-container {
Â  Â  Â  Â  Â  Â  width: 95%;
Â  Â  Â  Â  Â  Â  max-width: 550px;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  background: var(--color-paper);
Â  Â  Â  Â  Â  Â  border: var(--panel-stroke-width) solid var(--color-ink);
Â  Â  Â  Â  Â  Â  box-shadow: 15px 15px 0 rgba(0, 0, 0, 0.8);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  transform: skewX(-3deg);
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease-out;
Â  Â  Â  Â  Â  Â  margin: 20px auto;
Â  Â  Â  Â  Â  Â  min-height: auto;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes gameSlam {
Â  Â  Â  Â  Â  Â  0% { transform: skewX(-3deg) scale(1); opacity: 1; }
Â  Â  Â  Â  Â  Â  50% { transform: skewX(-10deg) scale(1.05) translateY(-10px); box-shadow: 20px 20px 0 rgba(0, 0, 0, 1); }
Â  Â  Â  Â  Â  Â  100% { transform: skewX(-3deg) scale(0.95); opacity: 0.8; }
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-container > * { transform: skewX(3deg); } /* Counter-skew children */

Â  Â  Â  Â  /* --- TITLE & STATUS --- */
Â  Â  Â  Â  #title {
Â  Â  Â  Â  Â  Â  font-family: var(--font-bangers);
Â  Â  Â  Â  Â  Â  font-size: clamp(2.5em, 8vw, 4.5em);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  color: var(--color-accent-x);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  text-shadow: 4px 4px 0 var(--color-ink), -2px -2px 0 var(--color-ink);
Â  Â  Â  Â  Â  Â  animation: titleEntrance 1s ease-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  #status {
Â  Â  Â  Â  Â  Â  font-family: var(--font-marker);
Â  Â  Â  Â  Â  Â  font-size: 1.8em;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border: 2px dashed var(--color-ink);
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.7);
Â  Â  Â  Â  Â  Â  min-height: 50px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- GAME BOARD --- */
Â  Â  Â  Â  #board {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  Â  Â  Â  Â  grid-template-rows: repeat(3, 1fr);
Â  Â  Â  Â  Â  Â  gap: var(--panel-stroke-width);
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  aspect-ratio: 1 / 1;
Â  Â  Â  Â  Â  Â  background-color: var(--color-ink);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cell {
Â  Â  Â  Â  Â  Â  background-color: var(--color-paper);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  font-family: var(--font-marker);
Â  Â  Â  Â  Â  Â  font-size: clamp(3em, 15vw, 6em);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  user-select: none;
Â  Â  Â  Â  Â  Â  transition: background-color 0.1s ease;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  border: 2px solid var(--color-ink);
Â  Â  Â  Â  }

Â  Â  Â  Â  .cell:hover {
Â  Â  Â  Â  Â  Â  background-color: #eee;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Piece Styling */
Â  Â  Â  Â  .cell .piece {
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transform: scale(0.5) rotate(360deg);
Â  Â  Â  Â  Â  Â  transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.3s ease;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cell.x-played .piece {
Â  Â  Â  Â  Â  Â  color: var(--color-accent-x);
Â  Â  Â  Â  Â  Â  transform: scale(1) rotate(0deg);
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  text-shadow: 5px 5px 0 var(--color-ink), -2px -2px 0 var(--color-accent-x);
Â  Â  Â  Â  Â  Â  animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cell.o-played .piece {
Â  Â  Â  Â  Â  Â  color: var(--color-accent-o);
Â  Â  Â  Â  Â  Â  transform: scale(1) rotate(0deg);
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  text-shadow: 5px 5px 0 var(--color-ink), -2px -2px 0 var(--color-accent-o);
Â  Â  Â  Â  Â  Â  animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Advanced Move Animation (Initial Pop) */
Â  Â  Â  Â  @keyframes popIn {
Â  Â  Â  Â  Â  Â  0% { transform: scale(0) rotate(360deg); opacity: 0; }
Â  Â  Â  Â  Â  Â  50% { transform: scale(1.5) rotate(-10deg); opacity: 1; }
Â  Â  Â  Â  Â  Â  100% { transform: scale(1) rotate(0deg); opacity: 1; }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* --- EXPLOSION PARTICLE EFFECT (Comic Impact) --- */
Â  Â  Â  Â  .explosion {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  width: 10px;
Â  Â  Â  Â  Â  Â  height: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  background: currentColor; /* Inherit X or O color */
Â  Â  Â  Â  Â  Â  animation: explode 0.5s forwards ease-out;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  z-index: 5;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  @keyframes explode {
Â  Â  Â  Â  Â  Â  0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
Â  Â  Â  Â  Â  Â  100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- WIN ANIMATION EFFECTS --- */
Â  Â  Â  Â  #board::before {
Â  Â  Â  Â  Â  Â  content: '';
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  z-index: 10;
Â  Â  Â  Â  Â  Â  background: var(--color-win-line);
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%) scale(0);
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s, transform 0.5s;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px var(--color-win-line);
Â  Â  Â  Â  Â  Â  border: 4px solid var(--color-ink);
Â  Â  Â  Â  }

Â  Â  Â  Â  .win-line-active { opacity: 1 !important; transform: translate(-50%, -50%) scale(1) !important; }

Â  Â  Â  Â  .row0-win::before { width: 90%; height: 20px; top: 16.66%; left: 50%; }
Â  Â  Â  Â  .row1-win::before { width: 90%; height: 20px; top: 50%; left: 50%; }
Â  Â  Â  Â  .row2-win::before { width: 90%; height: 20px; top: 83.33%; left: 50%; }

Â  Â  Â  Â  .col0-win::before { width: 20px; height: 90%; top: 50%; left: 16.66%; }
Â  Â  Â  Â  .col1-win::before { width: 20px; height: 90%; top: 50%; left: 50%; }
Â  Â  Â  Â  .col2-win::before { width: 20px; height: 90%; top: 50%; left: 83.33%; }

Â  Â  Â  Â  .diag0-win::before { width: 120%; height: 20px; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(45deg) scale(1.05); }
Â  Â  Â  Â  .diag1-win::before { width: 120%; height: 20px; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg) scale(1.05); }

Â  Â  Â  Â  .cell.winning-cell {
Â  Â  Â  Â  Â  Â  animation: winningPulse 0.5s infinite alternate;
Â  Â  Â  Â  Â  Â  background-color: var(--color-win-line) !important;
Â  Â  Â  Â  Â  Â  border-color: var(--color-win-line) !important;
Â  Â  Â  Â  }
Â  Â  Â  Â  .cell.winning-cell .piece {
Â  Â  Â  Â  Â  Â  color: var(--color-ink) !important;
Â  Â  Â  Â  Â  Â  text-shadow: 2px 2px 0 var(--color-paper), -2px -2px 0 var(--color-paper);
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes winningPulse {
Â  Â  Â  Â  Â  Â  from { box-shadow: 0 0 10px var(--color-win-line); }
Â  Â  Â  Â  Â  Â  to { box-shadow: 0 0 25px var(--color-win-line), 0 0 35px var(--color-paper); }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- GAME OVER/POP-UP EFFECT --- */
Â  Â  Â  Â  #game-over-overlay {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: rgba(26, 26, 26, 0.9);
Â  Â  Â  Â  Â  Â  display: none; /* Controlled by JS */
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  z-index: 20;
Â  Â  Â  Â  Â  Â  perspective: 1000px;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  cursor: default;
Â  Â  Â  Â  }

Â  Â  Â  Â  .game-over-message {
Â  Â  Â  Â  Â  Â  font-family: var(--font-bangers);
Â  Â  Â  Â  Â  Â  font-size: clamp(3em, 12vw, 6em);
Â  Â  Â  Â  Â  Â  color: var(--color-accent-x);
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  background: var(--color-paper);
Â  Â  Â  Â  Â  Â  border: 8px double var(--color-ink);
Â  Â  Â  Â  Â  Â  box-shadow: 10px 10px 0 var(--color-ink);
Â  Â  Â  Â  Â  Â  transform: scale(0) rotateX(90deg);
Â  Â  Â  Â  Â  Â  animation: messagePop 0.8s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  line-height: 1.1;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes messagePop {
Â  Â  Â  Â  Â  Â  0% { transform: scale(0) rotateX(90deg); opacity: 0; }
Â  Â  Â  Â  Â  Â  70% { transform: scale(1.2) rotateX(-5deg); opacity: 1; }
Â  Â  Â  Â  Â  Â  100% { transform: scale(1) rotateX(0deg); opacity: 1; }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- BUTTONS --- */
Â  Â  Â  Â  .button-section {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  Â  Â  transform: skewX(3deg);
Â  Â  Â  Â  }

Â  Â  Â  Â  .comic-button {
Â  Â  Â  Â  Â  Â  font-family: var(--font-bangers);
Â  Â  Â  Â  Â  Â  font-size: 1.5em;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  background-color: var(--color-win-line);
Â  Â  Â  Â  Â  Â  color: var(--color-paper);
Â  Â  Â  Â  Â  Â  border: 4px solid var(--color-ink);
Â  Â  Â  Â  Â  Â  box-shadow: 4px 4px 0 var(--color-ink);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.1s ease-in-out;
Â  Â  Â  Â  Â  Â  text-shadow: 2px 2px 0 var(--color-ink);
Â  Â  Â  Â  Â  Â  margin: 0 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .comic-button:hover {
Â  Â  Â  Â  Â  Â  background-color: #38c738;
Â  Â  Â  Â  Â  Â  transform: translate(2px, 2px);
Â  Â  Â  Â  Â  Â  box-shadow: 2px 2px 0 var(--color-ink);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* GIF Button Container - ensure visible when overlay shows */
Â  Â  Â  Â  #gif-button-container {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- SOUND EFFECT DISPLAY (The Floating Text) --- */
Â  Â  Â  Â  #sound-effect-display {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%) scale(0.5);
Â  Â  Â  Â  Â  Â  font-family: var(--font-bangers);
Â  Â  Â  Â  Â  Â  font-size: clamp(3em, 15vw, 10em);
Â  Â  Â  Â  Â  Â  color: var(--color-accent-x);
Â  Â  Â  Â  Â  Â  text-shadow: 5px 5px 0 var(--color-ink), -5px -5px 0 var(--color-ink);
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  Â  Â  z-index: 9999;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  }
Â  Â  Â  Â  #sound-effect-display.show {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%) scale(1) rotate(5deg);
Â  Â  Â  Â  Â  Â  animation: shake 0.3s ease-in-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes shake {
Â  Â  Â  Â  Â  Â  0% { transform: translate(-50%, -50%) scale(1) rotate(5deg); }
Â  Â  Â  Â  Â  Â  25% { transform: translate(-52%, -52%) scale(1.1) rotate(-3deg); }
Â  Â  Â  Â  Â  Â  50% { transform: translate(-48%, -48%) scale(1) rotate(5deg); }
Â  Â  Â  Â  Â  Â  75% { transform: translate(-51%, -51%) scale(1.1) rotate(-3deg); }
Â  Â  Â  Â  Â  Â  100% { transform: translate(-50%, -50%) scale(1) rotate(5deg); }
Â  Â  Â  Â  }

/* --- FULL SCREEN GIF OVERLAY (FIXED FOR HORIZONTAL CONTENT) --- */
#gif-showcase-overlay {
Â  Â  position: fixed;
Â  Â  top: 0;
Â  Â  left: 0;
Â  Â  width: 100vw;
Â  Â  height: 100vh;
Â  Â  background: black; /* Essential for black border effect */
Â  Â  display: none;
Â  Â  align-items: center;
Â  Â  justify-content: center;
Â  Â  z-index: 10000;
}

#gif-showcase-image {
Â  Â  width: 100%;
Â  Â  height: 100%;
Â  Â  object-fit: contain; /* Ensures the whole image is visible within the screen */
Â  Â  background: black;
Â  Â  border: none !important;
Â  Â  box-shadow: none !important;
Â  Â  padding: 0 !important;
}

#gif-showcase-overlay img {
Â  Â  width: 100%;
Â  Â  height: 100%;
Â  Â  object-fit: contain;
Â  Â  background: black;
Â  Â  border: none !important;
Â  Â  box-shadow: none !important;
Â  Â  padding: 0 !important;
}
Â  Â  </style>
</head>
<body>

Â  Â  <div id="game-container">
Â  Â  Â  Â  <h1 id="title">TIC-TAC-TOE!</h1>
Â  Â  Â  Â  <div id="status">Player X's Turn!</div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="board">
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="0"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="1"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="2"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="3"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="4"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="5"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="6"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="7"></div>
Â  Â  Â  Â  Â  Â  <div class="cell" data-index="8"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="button-section">
Â  Â  Â  Â  Â  Â  <button id="reset-button" class="comic-button">NEW ARC!</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="game-over-overlay">
Â  Â  Â  Â  Â  Â  <div class="game-over-message" id="overlay-message"></div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="gif-button-container">
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="sound-effect-display"></div>
Â  Â Â 
Â  Â  <div id="gif-showcase-overlay">
Â  Â  Â  Â  <img id="gif-showcase-image" src="" alt="Fight Scene GIF">
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  console.log("ðŸ’¥ KA-POW! Tic-Tac-Toe Engine Initializing... ðŸš€");

Â  Â  Â  Â  Â  Â  const gameContainer = document.getElementById('game-container');
Â  Â  Â  Â  Â  Â  const board = document.getElementById('board');
Â  Â  Â  Â  Â  Â  const cells = document.querySelectorAll('.cell');
Â  Â  Â  Â  Â  Â  const statusDisplay = document.getElementById('status');
Â  Â  Â  Â  Â  Â  const resetButton = document.getElementById('reset-button');
Â  Â  Â  Â  Â  Â  const overlay = document.getElementById('game-over-overlay');
Â  Â  Â  Â  Â  Â  const overlayMessage = document.getElementById('overlay-message');
Â  Â  Â  Â  Â  Â  const soundDisplay = document.getElementById('sound-effect-display');
Â  Â  Â  Â  Â  Â  const gifButtonContainer = document.getElementById('gif-button-container');
Â  Â  Â  Â  Â  Â  const gifShowcaseOverlay = document.getElementById('gif-showcase-overlay');
Â  Â  Â  Â  Â  Â  const gifShowcaseImage = document.getElementById('gif-showcase-image');

Â  Â  Â  Â  Â  Â  let gameActive = false;
Â  Â  Â  Â  Â  Â  let currentPlayer = 'X';
Â  Â  Â  Â  Â  Â  let gameState = ["", "", "", "", "", "", "", "", ""];

Â  Â  Â  Â  Â  Â  const winningConditions = [
Â  Â  Â  Â  Â  Â  Â  Â  [0, 1, 2, 'row0-win'], [3, 4, 5, 'row1-win'], [6, 7, 8, 'row2-win'], // Rows
Â  Â  Â  Â  Â  Â  Â  Â  [0, 3, 6, 'col0-win'], [1, 4, 7, 'col1-win'], [2, 5, 8, 'col2-win'], // Columns
Â  Â  Â  Â  Â  Â  Â  Â  [0, 4, 8, 'diag0-win'], [2, 4, 6, 'diag1-win'] // Diagonals
Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // --- GIF MAPPING (Requires files named ani1.gif through ani7.gif in an 'animation' folder) ---
Â  Â  Â  Â  Â  Â  const fightScenes = [
Â  Â  Â  Â  Â  Â  Â  Â  { name: "CRITICAL HOOK", file: "animation/ani3.gif" },
Â  Â  Â  Â  Â  Â  Â  Â  { name: "WHIP ATTACK", file: "animation/ani2.gif" },
Â  Â  Â  Â  Â  Â  Â  Â  { name: "DUELING STRINGS", file: "animation/ani5.gif" },
Â  Â  Â  Â  Â  Â  Â  Â  { name: "SAMURAI CHARGE", file: "animation/ani7.gif" },
Â  Â  Â  Â  Â  Â  Â  Â  { name: "AXE PARRY", file: "animation/ani6.gif" },
Â  Â  Â  Â  Â  Â  Â  Â  { name: "RISING UPPERCUT", file: "animation/ani1.gif" },
Â  Â  Â  Â  Â  Â  Â  Â  { name: "SPEED PUNCH", file: "animation/ani4.gif" },
Â  Â  Â  Â  Â  Â  ];

Â  Â  Â  Â  Â  Â  // --- TONE.JS SOUND SETUP ---
Â  Â  Â  Â  Â  Â  const xSynth = new Tone.Synth({
Â  Â  Â  Â  Â  Â  Â  Â  oscillator: { type: "sine" },
Â  Â  Â  Â  Â  Â  Â  Â  envelope: { attack: 0.005, decay: 0.1, sustain: 0.1, release: 0.3 },
Â  Â  Â  Â  Â  Â  }).toDestination();

Â  Â  Â  Â  Â  Â  const oSynth = new Tone.AMSynth({
Â  Â  Â  Â  Â  Â  Â  Â  harmonicity: 2,
Â  Â  Â  Â  Â  Â  Â  Â  detune: 0,
Â  Â  Â  Â  Â  Â  Â  Â  oscillator: { type: "sawtooth" },
Â  Â  Â  Â  Â  Â  Â  Â  envelope: { attack: 0.05, decay: 0.2, sustain: 0.3, release: 0.5 },
Â  Â  Â  Â  Â  Â  Â  Â  modulation: { type: "square" }
Â  Â  Â  Â  Â  Â  }).toDestination();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const winSynth = new Tone.PolySynth(Tone.Synth, {
Â  Â  Â  Â  Â  Â  Â  Â  oscillator: { type: "triangle" },
Â  Â  Â  Â  Â  Â  Â  Â  envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 3.0 },
Â  Â  Â  Â  Â  Â  Â  Â  volume: -6
Â  Â  Â  Â  Â  Â  }).toDestination();

Â  Â  Â  Â  Â  Â  const drawNoise = new Tone.NoiseSynth({
Â  Â  Â  Â  Â  Â  Â  Â  noise: { type: "pink" },
Â  Â  Â  Â  Â  Â  Â  Â  envelope: { attack: 0.005, decay: 0.5, sustain: 0, release: 0.01 }
Â  Â  Â  Â  Â  Â  }).toDestination();
Â  Â  Â  Â  Â  Â  drawNoise.volume.value = -10;

Â  Â  Â  Â  Â  Â  // Audio Context Fix
Â  Â  Â  Â  Â  Â  let audioEnabled = false;
Â  Â  Â  Â  Â  Â  function enableAudioOnFirstGesture() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!audioEnabled) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Tone.start().then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  audioEnabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  document.body.addEventListener('pointerdown', enableAudioOnFirstGesture, { once: true });
Â  Â  Â  Â  Â  Â  resetButton.addEventListener('pointerdown', enableAudioOnFirstGesture, { once: true });

Â  Â  Â  Â  Â  Â  // Sound Effect Display
Â  Â  Â  Â  Â  Â  function showSoundEffect(text, color) {
Â  Â  Â  Â  Â  Â  Â  Â  soundDisplay.textContent = text;
Â  Â  Â  Â  Â  Â  Â  Â  soundDisplay.style.color = color;
Â  Â  Â  Â  Â  Â  Â  Â  soundDisplay.style.textShadow = `5px 5px 0 var(--color-ink), -5px -5px 0 ${color}`;
Â  Â  Â  Â  Â  Â  Â  Â  soundDisplay.classList.add('show');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const xOffset = Math.random() * 40 - 20;
Â  Â  Â  Â  Â  Â  Â  Â  const yOffset = Math.random() * 40 - 20;
Â  Â  Â  Â  Â  Â  Â  Â  soundDisplay.style.transform = `translate(calc(-50% + ${xOffset}px), calc(-50% + ${yOffset}px)) scale(1) rotate(5deg)`;

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  soundDisplay.classList.remove('show');
Â  Â  Â  Â  Â  Â  Â  Â  }, 700);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function playMoveSound() {
Â  Â  Â  Â  Â  Â  Â  Â  const color = currentPlayer === 'X' ? 'var(--color-accent-x)' : 'var(--color-accent-o)';
Â  Â  Â  Â  Â  Â  Â  Â  if (currentPlayer === 'X') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  xSynth.triggerAttackRelease("C5", "8n");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showSoundEffect("KA-CHINK!", color);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oSynth.triggerAttackRelease("G3", "4n");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showSoundEffect("WHUMP!", color);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function playWinSound() {
Â  Â  Â  Â  Â  Â  Â  Â  const notes = ["C4", "E4", "G4", "C5"];
Â  Â  Â  Â  Â  Â  Â  Â  winSynth.triggerAttackRelease(notes, "2n");
Â  Â  Â  Â  Â  Â  Â  Â  showSoundEffect("KABOOM!", 'var(--color-win-line)');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function playDrawSound() {
Â  Â  Â  Â  Â  Â  Â  Â  drawNoise.triggerAttackRelease("0.5");
Â  Â  Â  Â  Â  Â  Â  Â  showSoundEffect("STALEMATE!", 'var(--color-ink)');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function createExplosion(cell, player) {
Â  Â  Â  Â  Â  Â  Â  Â  const computed = getComputedStyle(document.documentElement);
Â  Â  Â  Â  Â  Â  Â  Â  const color = player === 'X' ? computed.getPropertyValue('--color-accent-x').trim() : computed.getPropertyValue('--color-accent-o').trim();
Â  Â  Â  Â  Â  Â  Â  Â  const numParticles = 10;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < numParticles; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const particle = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.className = 'explosion';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.style.color = color || (player === 'X' ? '#FF4500' : '#1E90FF');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const angle = Math.random() * 2 * Math.PI;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const distance = Math.random() * 100 + 30;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dx = Math.cos(angle) * distance;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dy = Math.sin(angle) * distance;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.style.setProperty('--dx', `${dx}px`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.style.setProperty('--dy', `${dy}px`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.style.top = '50%';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.style.left = '50%';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cell.appendChild(particle);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  particle.remove();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 700);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // --- GAME LOGIC ---
Â  Â  Â  Â  Â  Â  function initializeGame() {
Â  Â  Â  Â  Â  Â  Â  Â  gameActive = true;
Â  Â  Â  Â  Â  Â  Â  Â  currentPlayer = 'X';
Â  Â  Â  Â  Â  Â  Â  Â  gameState = ["", "", "", "", "", "", "", "", ""];

Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.textContent = "Player X's Turn!";
Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.style.color = 'var(--color-ink)';

Â  Â  Â  Â  Â  Â  Â  Â  cells.forEach(cell => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cell.innerHTML = "";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cell.className = 'cell';
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  const allWinClasses = ['row0-win','row1-win','row2-win','col0-win','col1-win','col2-win','diag0-win','diag1-win','win-line-active'];
Â  Â  Â  Â  Â  Â  Â  Â  allWinClasses.forEach(cls => board.classList.remove(cls));
Â  Â  Â  Â  Â  Â  Â  Â  overlay.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.classList.remove('game-ending');
Â  Â  Â  Â  Â  Â  Â  Â  gifButtonContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function handleCellPlayed(clickedCell, clickedCellIndex) {
Â  Â  Â  Â  Â  Â  Â  Â  gameState[clickedCellIndex] = currentPlayer;
Â  Â  Â  Â  Â  Â  Â  Â  clickedCell.innerHTML = `<span class="piece">${currentPlayer}</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  clickedCell.classList.add(`${currentPlayer.toLowerCase()}-played`);
Â  Â  Â  Â  Â  Â  Â  Â  createExplosion(clickedCell, currentPlayer);
Â  Â  Â  Â  Â  Â  Â  Â  try { playMoveSound(); } catch (e) { /* fail gracefully if audio blocked */ }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function handlePlayerChange() {
Â  Â  Â  Â  Â  Â  Â  Â  currentPlayer = currentPlayer === "X" ? "O" : "X";
Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.textContent = `Player ${currentPlayer}'s Turn!`;
Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.style.color = currentPlayer === 'X' ? 'var(--color-accent-x)' : 'var(--color-accent-o)';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function createGifButton(outcome) {
Â  Â  Â  Â  Â  Â  Â  Â  gifButtonContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  const randomIndex = Math.floor(Math.random() * fightScenes.length);
Â  Â  Â  Â  Â  Â  Â  Â  const randomScene = fightScenes[randomIndex];

Â  Â  Â  Â  Â  Â  Â  Â  const buttonColor = outcome === 'draw' ? 'var(--color-ink)' : (currentPlayer === 'X' ? 'var(--color-accent-x)' : 'var(--color-accent-o)');
Â  Â  Â  Â  Â  Â  Â  Â  const buttonBg = outcome === 'draw' ? '#FFD700' : 'var(--color-win-line)';

Â  Â  Â  Â  Â  Â  Â  Â  const gifButton = document.createElement('button');
Â  Â  Â  Â  Â  Â  Â  Â  gifButton.classList.add('comic-button');
Â  Â  Â  Â  Â  Â  Â  Â  gifButton.style.backgroundColor = buttonBg;
Â  Â  Â  Â  Â  Â  Â  Â  gifButton.style.color = buttonColor;
Â  Â  Â  Â  Â  Â  Â  Â  gifButton.style.textShadow = `2px 2px 0 var(--color-ink)`;
Â  Â  Â  Â  Â  Â  Â  Â  gifButton.textContent = `BONUS SCENE: ${randomScene.name}!`;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  gifButton.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showGifScene(randomScene.file);
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  gifButtonContainer.appendChild(gifButton);

Â  Â  Â  Â  Â  Â  Â  Â  const newArcButton = document.createElement('button');
Â  Â  Â  Â  Â  Â  Â  Â  newArcButton.classList.add('comic-button');
Â  Â  Â  Â  Â  Â  Â  Â  newArcButton.textContent = 'START NEW ARC';
Â  Â  Â  Â  Â  Â  Â  Â  newArcButton.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initializeGame();
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  gifButtonContainer.appendChild(newArcButton);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function showGifScene(gifFileName) {
Â  Â  Â  Â  Â  Â  Â  Â  gifShowcaseImage.src = gifFileName;
Â  Â  Â  Â  Â  Â  Â  Â  gifShowcaseOverlay.style.display = 'flex';
Â  Â  Â  Â  Â  Â  }


Â  Â  Â  Â  Â  Â  function handleResultValidation() {
Â  Â  Â  Â  Â  Â  Â  Â  let roundWon = false;
Â  Â  Â  Â  Â  Â  Â  Â  let winningClass = '';
Â  Â  Â  Â  Â  Â  Â  Â  let winningCells = [];

Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < winningConditions.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const winCondition = winningConditions[i];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const [a, b, c, lineClass] = winCondition;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState[a] === '' || gameState[b] === '' || gameState[c] === '') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (gameState[a] === gameState[b] && gameState[b] === gameState[c]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  roundWon = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winningClass = lineClass;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winningCells = [a, b, c];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (roundWon) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameActive = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  board.classList.add(winningClass);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => board.classList.add('win-line-active'), 50);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  winningCells.forEach(index => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cells[index].classList.add('winning-cell');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try { playWinSound(); } catch (e) { /* ignore audio errors */ }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.textContent = `PLAYER ${currentPlayer} WINS! (KABOOM!)`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.style.color = 'var(--color-win-line)';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.classList.add('game-ending');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overlayMessage.textContent = `${currentPlayer} WINS!`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overlay.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overlayMessage.style.color = currentPlayer === 'X' ? 'var(--color-accent-x)' : 'var(--color-accent-o)';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createGifButton('win');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 500);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  let roundDraw = !gameState.includes("");
Â  Â  Â  Â  Â  Â  Â  Â  if (roundDraw) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameActive = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try { playDrawSound(); } catch (e) {}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.textContent = "It's a DRAW!";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusDisplay.style.color = 'var(--color-ink)';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.classList.add('game-ending');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overlayMessage.textContent = `DRAW!`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overlay.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overlayMessage.style.color = 'var(--color-ink)';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // No GIF for draw, just the New Arc button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gifButtonContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newArcButton = document.createElement('button');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  newArcButton.classList.add('comic-button');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  newArcButton.textContent = 'START NEW ARC';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  newArcButton.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  initializeGame();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gifButtonContainer.appendChild(newArcButton);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 400);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }


Â  Â  Â  Â  Â  Â  Â  Â  handlePlayerChange();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  function handleCellClick(e) {
Â  Â  Â  Â  Â  Â  Â  Â  const clickedCell = e.target.closest('.cell');
Â  Â  Â  Â  Â  Â  Â  Â  if (!clickedCell) return;

Â  Â  Â  Â  Â  Â  Â  Â  const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState[clickedCellIndex] !== "" || !gameActive) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  handleCellPlayed(clickedCell, clickedCellIndex);
Â  Â  Â  Â  Â  Â  Â  Â  handleResultValidation();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Event Listeners
Â  Â  Â  Â  Â  Â  cells.forEach(cell => cell.addEventListener('click', handleCellClick));
Â  Â  Â  Â  Â  Â  resetButton.addEventListener('click', initializeGame);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Close full-screen GIF overlay by clicking anywhere on it
Â  Â  Â  Â  Â  Â  gifShowcaseOverlay.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  gifShowcaseOverlay.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  gifShowcaseImage.src = ""; // Clear the GIF source
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Initialize the game at load
Â  Â  Â  Â  Â  Â  initializeGame();
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>


